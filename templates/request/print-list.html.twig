{% extends 'base.html.twig' %}

{% block body %}
    <main class="pt-5 mx-lg-5">
        <div class="container-fluid">

            <!-- Heading -->
            <div class="card mb-4 wow fadeIn">

                <!--Card content-->
                <div class="card-body d-sm-flex justify-content-between">

                    <h4 class="mb-2 mb-sm-0 pt-1">
                        <a href="#" target="_blank">Главная</a>
                        <span>/</span>
                        <span>Распечатка</span>
                    </h4>

                    <form class="d-flex justify-content-center" action="{{ path(app.request.attributes.get('_route'), app.request.attributes.get('_route_params')) }}" method="post" novalidate>
                        <!-- Default input -->
                        {{ form_widget(form._token) }}

                        {{ form_widget(form.text, {attr: {"class" : "form-control"}}) }}

                        <button id="{{ form.submit.vars.id }}" name="{{ form.submit.vars.name }}" class="btn btn-primary btn-sm my-0 p" type="submit">
                            <i class="fa fa-search"></i>
                        </button>

                    </form>

                </div>

            </div>
            <!-- Heading -->


            <!-- Central Modal Large Info-->
            <div class="modal fade" id="centralModalLGRequestMain" tabindex="-1" role="dialog"
                 aria-labelledby="myModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-lg modal-notify modal-info" role="document">
                    <!--Content-->
                    <div class="modal-content">
                    </div>
                    <!--/.Content-->
                </div>
            </div>
            <!-- Central Modal Large Info-->

            {% for date, groupDocRequest in docRequests %}
                <!--Grid row-->
                <div class="row">

                    <!--Grid column-->
                    <div class="col-md-12 mb-4">

                        <!--Card-->
                        <div class="card">

                            <!--Card content-->
                            <div class="card-body">
                                <h2 class="mb-2">{{ date }}</h2>
                                <button type="button" class="btn btn-outline-secondary waves-effect some_btn_rise">Печать</button>
                                <!-- Table  -->
                                <table class="table table-hover main_table">
                                    <!-- Table head -->
                                    <thead class="blue-grey lighten-4">
                                    <tr>
                                        <th>Номер сделки</th>
                                        <th>Контакт</th>
                                        <th>Телефон</th>
                                        <th>Срок</th>
                                        <th>Сумма</th>
                                        <th>Этап сделки</th>
                                        <th>Тип</th>
                                        <th>Примечание</th>
                                    </tr>
                                    </thead>
                                    <!-- Table head -->

                                    <!-- Table body -->
                                    <tbody>
                                    {% for doc in groupDocRequest %}
                                        <tr>
                                            <td><a class="n_sd link-to-edit-document-request" data-id="{{ doc.id }}">Заявка №{{ doc.id }}</a></td>
                                            <td>{{ doc.fio }}</td>
                                            <td>{{ doc.phone }}</td>
                                            <td>{{ doc.getRegistrationTerm() }}</td>
                                            <td>{{ doc.budget }}</td>
                                            <td><button type="button" class="btn btn-red">{{ doc.getViewStatus() }}</button></td>
                                            <td>{{ doc.type }}</td>
                                            <td>{{ doc.comment }}</td>
                                        </tr>
                                    {% endfor %}
                                    </tbody>
                                    <!-- Table body -->
                                </table>
                                <!-- Table  -->

                            </div>

                        </div>
                        <!--/.Card-->

                    </div>
                    <!--Grid column-->

                </div>
                <!--Grid row-->
            {% endfor %}

        </div>
    </main>
{% endblock %}

{% block javascripts %}
    {% include('/request/js/js-print.html.twig') %}
    <script src="/js/client/edit-document-request.js"></script>
{% endblock %}